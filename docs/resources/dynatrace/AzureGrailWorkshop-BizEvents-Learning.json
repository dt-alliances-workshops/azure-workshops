{"version":"5","defaultTimeframe":{"from":"now-2h","to":"now"},"sections":[{"id":"be-intro-001","type":"markdown","markdown":"# BizEvents Lab: Analyzing Business Events with DQL\n\n## What are BizEvents?\n\nBizEvents (Business Events) capture meaningful business transactions and user actions in your applications. Unlike logs which capture technical details, BizEvents focus on business-relevant data such as:\n\n- **Transactions** — Trades, purchases, bookings, signups\n- **User actions** — Logins, searches, cart additions\n- **Business metrics** — Revenue, conversion rates, order values\n\nThe easyTrade application sends BizEvents for every trade transaction, allowing us to analyze trading patterns, volumes, and user behavior.\n\n## Learning Objectives\n\nIn this notebook, you will learn to:\n\n1. Query BizEvents using DQL\n2. Filter and summarize business transactions\n3. Create time series visualizations with `makeTimeseries`\n4. Join data from multiple sources using `lookup`\n\n**DQL Quick Reference for BizEvents:**\n\n| Command | Description | Example |\n|---------|-------------|---------|\n| fetch bizevents | Get business events | fetch bizevents |\n| filter | Filter by event type | filter event.type == \"com.easytrade.buy\" |\n| summarize | Aggregate data | summarize count(), by: {trade.type} |\n| makeTimeseries | Create time series | makeTimeseries count(), by:{type}, interval:5m |\n| lookup | Join with other data | lookup [subquery], sourceField:id, lookupField:id |\n"},{"id":"be-ex1-intro","type":"markdown","markdown":"## Exercise 1: Explore BizEvents\n\nLet's start by exploring the BizEvents data from easyTrade. This query fetches all business events so you can see what fields are available."},{"id":"be-ex1-query","type":"dql","title":"Exercise 1: Basic BizEvents Query","showTitle":true,"state":{"input":{"value":"// EXERCISE 1: Basic BizEvents Query\n// \n// Goal: Fetch business events from the easyTrade application\n// \n// Hint: Use the fetch command with the bizevents data type\n// Syntax: fetch <data_type>\n// \n// After running, examine the available fields like:\n// - event.type (the type of business event)\n// - timestamp\n// - Various business-specific fields\n// \n// Write your query below:\n","timeframe":{"from":"now-2h","to":"now"}},"visualization":"table","visualizationSettings":{"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}}}}},{"id":"be-ex2-intro","type":"markdown","markdown":"## Exercise 2: Count Trades by Type\n\nThe easyTrade application has different trade types (buy, sell). Let's count how many trades of each type have occurred."},{"id":"be-ex2-query","type":"dql","title":"Exercise 2: Summarize Trades by Type","showTitle":true,"state":{"input":{"value":"// EXERCISE 2: Summarize Trades by Type\n// \n// Goal: Count the number of trades grouped by trade direction (buy/sell)\n// \n// Hints:\n// - Start with: fetch bizevents\n// - Filter to trade events using: filter event.type == \"com.easytrade.buy\" or event.type == \"com.easytrade.sell\"\n// - Or use: filter matchesPhrase(event.type, \"easytrade\")\n// - Use | summarize count(), by: {<field>}\n// - Group by: event.type\n// \n// Write your query below:\n","timeframe":{"from":"now-24h","to":"now"}},"visualization":"table","visualizationSettings":{"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"chartSettings":{"categoricalBarChartSettings":{"categoryAxis":"event.type","valueAxis":"count()"}}}}},{"id":"be-ex3-intro","type":"markdown","markdown":"## Exercise 3: Trade Volume Over Time\n\nTo understand trading patterns, we need to see how trade volume changes over time. The `makeTimeseries` command creates time-bucketed aggregations perfect for charting."},{"id":"be-ex3-query","type":"dql","title":"Exercise 3: Trade Time Series","showTitle":true,"state":{"input":{"value":"// EXERCISE 3: Trade Volume Over Time\n// \n// Goal: Create a time series showing trade counts over time, split by trade type\n// \n// Hints:\n// - Start with: fetch bizevents\n// - Filter to easyTrade events\n// - Use makeTimeseries instead of summarize:\n//   | makeTimeseries count(), by:{<group_field>}, interval:<time_bucket>\n// - Group by: event.type\n// - Use interval: 5m (5 minutes) for granular view\n// \n// After running, change visualization to \"Line chart\" to see trends!\n// \n// Write your query below:\n","timeframe":{"from":"now-2h","to":"now"}},"visualization":"lineChart","visualizationSettings":{"chartSettings":{"legend":{"position":"bottom"},"leftYAxis":{"label":"Trade Count"}},"table":{"rowDensity":"condensed"}}}},{"id":"be-ex4-intro","type":"markdown","markdown":"## Exercise 4: Trade Analysis with Lookup\n\nThe `lookup` command lets you join data from different queries. This is powerful for enriching BizEvents with additional context, like user account information.\n\nIn this exercise, we'll analyze average instrument prices by joining trade data with instrument information."},{"id":"be-ex4-query","type":"dql","title":"Exercise 4: Join Data with Lookup","showTitle":true,"state":{"input":{"value":"// EXERCISE 4: Advanced Analysis with Lookup\n// \n// Goal: Calculate average instrument price per trade, grouped by instrument\n// \n// Hints:\n// - Start with: fetch bizevents\n// - Filter to buy or sell events\n// - Extract the instrument ID and price fields\n// - Use summarize to calculate average price:\n//   | summarize avg(<price_field>), by: {<instrument_field>}\n// \n// Advanced: Use lookup to join with another query:\n//   | lookup [<subquery>], sourceField:<field>, lookupField:<field>\n// \n// For this exercise, focus on summarizing the average price by instrument:\n// \n// Write your query below:\n","timeframe":{"from":"now-24h","to":"now"}},"visualization":"table","visualizationSettings":{"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"chartSettings":{"categoricalBarChartSettings":{"categoryAxis":"instrumentId","valueAxis":"avg(price)"}}}}},{"id":"be-summary","type":"markdown","markdown":"## Summary\n\nIn this notebook, you learned how to:\n\n| Concept | DQL Command | Use Case |\n|---------|-------------|----------|\n| Query BizEvents | `fetch bizevents` | Access business event data |\n| Filter events | `filter event.type == \"...\"` | Focus on specific transaction types |\n| Aggregate data | `summarize count(), by:{field}` | Count and group business metrics |\n| Time series | `makeTimeseries count(), interval:5m` | Visualize trends over time |\n| Join data | `lookup [query], sourceField:x, lookupField:y` | Enrich events with related data |\n\n**Next Steps:**\n- Try changing the time range to see different patterns\n- Experiment with different visualizations (bar chart, pie chart)\n- Explore other BizEvent fields in your data\n"}]}