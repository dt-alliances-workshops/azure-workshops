{"version":"5","defaultTimeframe":{"from":"now-2h","to":"now","details":{"from":{"type":"expression","normalized":"now-2h","date":"2024-04-14T16:25:54.919Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-14T18:25:54.919Z"}}},"sections":[{"id":"1e842f23-818b-4297-827f-272fe44ce15f","type":"markdown","markdown":"# Welcome to the Dynatrace Workshop! \n## Answers, Analytics, and Automation for Unified Observability and Security\n\n![](https://mkt-cdn.dynatrace.com/assets/Marketing/dynatrace-dash-hero.png)\n\n# Topics\n* Grail - Dynatrace's data lakehouse purpose for observability data. It acts as a single unified storage solution for logs, metrics, traces, events, in full context!\n* Dynatrace Query Language - Unlock answers from the goldmine of observability and security data in Dynatrace!\n* Automation Engine - Proactive prevention, efficient operation, auto-remediation, automated quality checks, and route/report!\n* App Engine - If you can dream it, you can build it!\n\nThis notebook will be your guide today with all of the relevant info you need. We will not cover every lab in the workshop today. After we cover the logs/basics section, we can do a \"chose your own adventure\" based on which data types/features you want to dig into. The workshop is designed to give you the building blocks to understand and use the new platform. You will have access to this demo environment until Aug 25 so you can keep playing around and working on the additional exercises. \n"},{"id":"56af542c-31fd-4088-8e85-994bcec6eb3c","type":"markdown","markdown":"# Log Lab: How can we get answers from Logs?\n\n## Learning Exercise\n\nThis notebook contains **exercises** to help you learn DQL step by step. Each section provides hints to help you construct the query yourself.\n\n**DQL Quick Reference:**\n\n| Command | Description | Example |\n|---------|-------------|---------|\n| fetch | Get data | fetch logs |\n| filter | Filter results | filter cloud.provider == \"azure\" |\n| sort | Order results | sort timestamp desc |\n| limit | Restrict output | limit 100 |\n| summarize | Aggregate data | summarize count(), by: {field} |\n\n**Tip:** Try writing each query yourself before checking the answers notebook!"},{"id":"d42cc170-d297-4be7-ac53-00c244a9cee0","type":"dql","title":"Exercise 1: Basic Log Query","showTitle":true,"state":{"input":{"value":"// EXERCISE 1: Basic Log Query\n// \n// Goal: Fetch logs from Grail\n// \n// Hint: Use the fetch command followed by the data type\n// Syntax: fetch <data_type>\n// \n// Write your query below:\n","timeframe":{"from":"now-7d","to":"now","details":{"from":{"type":"expression","normalized":"now-7d","date":"2024-03-31T03:10:40.234Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-07T03:10:40.234Z"}}}},"visualization":"recordView","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"timestamp","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}}},{"id":"1f3880c5-1547-4566-a91a-a125f93a48f9","type":"markdown","markdown":"## Let's now query logs for all source but only fetch the first 100 logs and sort them by Timestamp"},{"id":"d6268061-7995-4ae8-920f-af7d2d831d0b","type":"dql","title":"Exercise 2: Sort and Limit Results","showTitle":true,"showInput":true,"state":{"input":{"value":"// EXERCISE 2: Sort and Limit Results\n// \n// Goal: Fetch logs, sort by timestamp (newest first), limit to 100 records\n// \n// Hints:\n// - Start with: fetch logs\n// - Use pipe | to chain commands\n// - sort <field> desc - sorts descending\n// - limit <number> - restricts output\n// \n// Write your query below:\n","timeframe":{"from":"now-2h","to":"now"}},"visualizationSettings":{"singleValue":{"recordField":"timestamp"},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}},"visualization":"table"}},{"id":"434f62c5-1039-4124-9f77-ad418de6969b","type":"markdown","markdown":"### Let's now fetch logs and filter by those that come from Azure services only."},{"id":"427fd3b3-a6a8-4d00-acbc-f9669a8e4d05","type":"dql","title":"Exercise 3: Filter Azure Logs","showTitle":true,"state":{"input":{"value":"// EXERCISE 3: Filter Azure Logs\n// \n// Goal: Fetch only logs from Azure cloud provider\n// \n// Hints:\n// - Start with: fetch logs\n// - Use | filter <field> == \"value\" to filter\n// - Azure logs have field: cloud.provider\n// - Azure value is: \"azure\"\n// \n// Write your query below:\n","timeframe":{"from":"now-1h","to":"now","details":{"from":{"type":"expression","normalized":"now-1h","date":"2024-03-30T15:15:53.327Z"},"to":{"type":"expression","normalized":"now","date":"2024-03-30T16:15:53.327Z"}}}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"timestamp","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}}},{"id":"6bc9297c-bfb4-4118-b88b-5887665150f8","type":"markdown","markdown":"### Let's now add upon the previous query and only fetch logs for specific Azure resource type"},{"id":"41711030-f98e-4c4b-8a16-c27967ce7009","type":"dql","title":"Exercise 4: Filter by Resource Type","showTitle":true,"state":{"input":{"value":"// EXERCISE 4: Filter by Specific Azure Resource Type\n// \n// Goal: Filter logs to a specific Azure resource type\n// \n// Hints:\n// - Build on Exercise 3\n// - Add another | filter for resource type\n// - Field name: azure.resource.type\n// - Example value: \"MICROSOFT.NETWORK/NETWORKSECURITYGROUPS\"\n// \n// Write your query below:\n","timeframe":{"from":"now-24h","to":"now","details":{"from":{"type":"expression","normalized":"now-24h","date":"2024-04-07T14:44:39.365Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-08T14:44:39.365Z"}}}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"timestamp","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}}},{"id":"9db308c2-5494-494b-b416-1ca3007a8c73","type":"markdown","markdown":"### Now we are fetching logs for all Azure resource types and summarizing the count."},{"id":"c654880c-d203-461b-808a-d40532732230","type":"dql","title":"Exercise 5: Summarize Log Counts","showTitle":true,"state":{"input":{"value":"// EXERCISE 5: Summarize Log Counts by Resource Type\n// \n// Goal: Count logs grouped by Azure resource type\n// \n// Hints:\n// - Start with: fetch logs\n// - Filter to Azure provider\n// - Use | summarize count(), by: {<field>}\n// - Group by: azure.resource.type\n// \n// Write your query below:\n","timeframe":{"from":"now-1h","to":"now","details":{"from":{"type":"expression","normalized":"now-1h","date":"2024-03-29T18:50:01.008Z"},"to":{"type":"expression","normalized":"now","date":"2024-03-29T19:50:01.008Z"}}}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"azure.resource.type","categoryAxisLabel":"azure.resource.type","valueAxis":"count()","valueAxisLabel":"count()"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"status","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"count()","rangeAxis":""}]},"honeycomb":{"shape":"square"}}}},{"id":"e52bb103-fba1-49b7-b07e-72a03897544b","type":"dql","title":"Exercise 6: Multi-Field Grouping","showTitle":true,"state":{"input":{"value":"// EXERCISE 6: Summarize by Multiple Fields\n// \n// Goal: Count logs grouped by BOTH log level AND resource type\n// \n// Hints:\n// - Build on Exercise 5\n// - Add multiple fields to by: {field1, field2}\n// - Log level field: loglevel\n// - Values include: INFO, WARN, ERROR, etc.\n// \n// Write your query below:\n","timeframe":{"from":"now-7d","to":"now","details":{"from":{"type":"expression","normalized":"now-7d","date":"2024-03-31T03:10:40.234Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-07T03:10:40.234Z"}}}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"loglevel","valueAxis":"count()","categoryAxisLabel":"loglevel","valueAxisLabel":"count()"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"azure.resource.type"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"count()","rangeAxis":""}]},"honeycomb":{"shape":"square"}}}}]}