{"version":"5","defaultTimeframe":{"from":"now-1h","to":"now","details":{"from":{"type":"expression","normalized":"now-1h","date":"2024-04-12T18:59:53.271Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-12T19:59:53.271Z"}}},"sections":[{"id":"intro-answers","type":"markdown","markdown":"# Metrics Lab: Answers\n\nThis notebook contains the **answers** to the Metrics Lab exercises. Use this as a reference after attempting the exercises yourself."},{"id":"557641e0-92ab-4860-af94-09a0334aebf3","type":"dql","title":"Answer 1: Chart Top 10 Hosts by CPU Usage","showTitle":true,"state":{"input":{"value":"timeseries cpu=avg(dt.host.cpu.usage), by:{dt.entity.host}\n| sort arrayAvg(cpu), direction:\"descending\"\n| limit 10","timeframe":{"from":"now-1h","to":"now","details":{"from":{"type":"expression","normalized":"now-1h","date":"2024-04-12T18:59:45.067Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-12T19:59:45.067Z"}}}},"visualization":"lineChart","state":"success","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.host","categoryAxisLabel":"dt.entity.host","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["cpu"],"leftAxisDimensions":["dt.entity.host"]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"dt.entity.host","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}}},{"id":"a50208d8-1bee-4b77-ae74-e9c6f25466d4","type":"dql","title":"Answer 2: Basic CPU Timeseries","showTitle":true,"state":{"input":{"value":"timeseries avg(dt.host.cpu.usage), by:{dt.entity.host}","timeframe":{"from":"now-1h","to":"now","details":{"from":{"type":"expression","normalized":"now-1h","date":"2024-04-12T18:59:53.271Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-12T19:59:53.271Z"}}}},"visualization":"lineChart","state":"success","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.host","valueAxis":"interval","categoryAxisLabel":"dt.entity.host","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(dt.host.cpu.usage)"],"leftAxisDimensions":["dt.entity.host"],"rightAxisDimensions":[]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"dt.entity.host"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}}},{"id":"aa9653b6-bb15-4c8d-9801-f5dfb2b006d7","type":"markdown","markdown":"## Forecasting Metrics\n\n- In the section below we'll use CPU Metrics we've collected for the VM hosts in our lab. \n- Next we'll run the Davis Analyzer to predict how the CPU utilization of the host will be for the host.  \n\n### Here are the instructions to predict the CPU utilization.  \n - Select the next section of the Notebook and \n - Click on **Run Analysis** to run the DQL query and Davis Analyzer on the host metrics\n - For the timeframe select **Last 2 Hours** \n   - To view how to turn on Davis Analyzer for predictions, click on Options button, click on Davis AI at the bottom\n   - On the next screen you'll notice we are using the **Forecast** Analyzer\n - On the chart you'll notice blue shading that shows above & below the line.  \n   - Based on the metrics, Davis is predicting the CPU utilization to within that blue shade for this host. \n \n   "},{"id":"bbbd93f2-5257-4793-bbc4-69b75077b7e1","type":"dql","title":"Answer 3: Prepare Data for Forecasting","showTitle":true,"showInput":true,"state":{"input":{"value":"timeseries avg(dt.host.cpu.usage), by:{dt.entity.host}\n| fields `avg(dt.host.cpu.usage)`, `dt.entity.host`, `interval`, `timeframe`","timeframe":{"from":"now-2h","to":"now","details":{"from":{"type":"expression","normalized":"now-2h","date":"2024-04-12T16:40:51.357Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-12T18:40:51.357Z"}}}},"visualization":"davis","state":"success","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.host","categoryAxisLabel":"dt.entity.host","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(dt.host.disk.free)"],"leftAxisDimensions":["dt.entity.host"]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"dt.entity.host","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}}}]}