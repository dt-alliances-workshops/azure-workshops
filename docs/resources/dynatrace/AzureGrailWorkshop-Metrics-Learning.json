{"version":"5","defaultTimeframe":{"from":"now-1h","to":"now","details":{"from":{"type":"expression","normalized":"now-1h","date":"2024-04-12T18:59:53.271Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-12T19:59:53.271Z"}}},"sections":[{"id":"intro-learning","type":"markdown","markdown":"# Metrics Lab: Working with Timeseries Data\n\n## Learning Exercise\n\nThis notebook contains **exercises** to help you learn DQL for metrics. Each section provides hints to help you construct the query yourself.\n\n**Timeseries Quick Reference:**\n\n| Command | Description | Example |\n|---------|-------------|---------|\n| timeseries | Create time-based data | timeseries avg(dt.host.cpu.usage) |\n| by:{} | Group by entity | by:{dt.entity.host} |\n| interval | Set time bucket size | interval:5m |\n| sort | Order results | sort arrayAvg(cpu), direction:\"descending\" |\n| limit | Restrict output | limit 10 |\n\n**Tip:** Try writing each query yourself before checking the answers notebook!"},{"id":"557641e0-92ab-4860-af94-09a0334aebf3","type":"dql","title":"Exercise 1: Chart Top 10 Hosts by CPU Usage","showTitle":true,"state":{"input":{"value":"// EXERCISE 1: Chart Top 10 Hosts by CPU Usage\n// \n// Goal: Create a timeseries showing CPU usage, sorted to show top 10 hosts\n// \n// Hints:\n// - Use timeseries command for time-based metrics\n// - Syntax: timeseries <alias>=<aggregation>(<metric>), by:{<entity>}\n// - Metric: dt.host.cpu.usage\n// - Entity: dt.entity.host\n// - Use | sort arrayAvg(<alias>), direction:\"descending\" to sort\n// - Use | limit 10 to show top 10\n// \n// Write your query below:\n","timeframe":{"from":"now-1h","to":"now","details":{"from":{"type":"expression","normalized":"now-1h","date":"2024-04-12T18:59:45.067Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-12T19:59:45.067Z"}}}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.host","categoryAxisLabel":"dt.entity.host","valueAxis":"interval","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["cpu"],"leftAxisDimensions":["dt.entity.host"]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","recordField":"dt.entity.host","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}}},{"id":"a50208d8-1bee-4b77-ae74-e9c6f25466d4","type":"dql","title":"Exercise 2: Basic CPU Timeseries","showTitle":true,"state":{"input":{"value":"// EXERCISE 2: Basic CPU Timeseries\n// \n// Goal: Create a simple timeseries of CPU usage per host\n// \n// Hints:\n// - Use timeseries command\n// - Aggregation: avg()\n// - Metric: dt.host.cpu.usage\n// - Group by: dt.entity.host\n// \n// Write your query below:\n","timeframe":{"from":"now-1h","to":"now","details":{"from":{"type":"expression","normalized":"now-1h","date":"2024-04-12T18:59:53.271Z"},"to":{"type":"expression","normalized":"now","date":"2024-04-12T19:59:53.271Z"}}}},"visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.host","valueAxis":"interval","categoryAxisLabel":"dt.entity.host","valueAxisLabel":"interval"},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(dt.host.cpu.usage)"],"leftAxisDimensions":["dt.entity.host"],"rightAxisDimensions":[]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value","recordField":"dt.entity.host"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}}},{"id":"disk-space-intro","type":"markdown","markdown":"## Disk Space Monitoring\n\nMonitoring disk space is critical for preventing outages. Dynatrace collects disk metrics that help you identify hosts running low on storage before they become critical."},{"id":"disk-space-exercise","type":"dql","title":"Exercise 3: Monitor Disk Free Space","showTitle":true,"state":{"input":{"value":"// EXERCISE 3: Monitor Disk Free Space\n// \n// Goal: Create a timeseries showing available disk space per host,\n//       sorted to show hosts with LEAST free space first\n// \n// Hints:\n// - Use timeseries command with an alias\n// - Metric: dt.host.disk.free (returns percentage of free space)\n// - Group by: dt.entity.host\n// - Sort ascending to see hosts with least free space first\n// - Use | sort arrayAvg(<alias>) (ascending is default)\n// - Limit to top 5 hosts with lowest free space\n// \n// Write your query below:\n","timeframe":{"from":"now-1h","to":"now"}},"visualization":"lineChart","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["disk"],"leftAxisDimensions":["dt.entity.host"]},"leftYAxis":{"label":"Disk Free %"}},"table":{"rowDensity":"condensed"}}}},{"id":"custom-interval-intro","type":"markdown","markdown":"## Custom Time Intervals\n\nBy default, Dynatrace automatically determines the time bucket size based on your query timeframe. However, you can specify a custom interval to control the granularity of your timeseries data.\n\n**Common interval values:**\n\n| Interval | Use Case |\n|----------|----------|\n| `1m` | High granularity, short timeframes |\n| `5m` | Balanced detail for 1-2 hour ranges |\n| `15m` | Smoother trends, less noise |\n| `1h` | Long-term trends over days/weeks |"},{"id":"custom-interval-exercise","type":"dql","title":"Exercise 4: Custom Time Intervals","showTitle":true,"state":{"input":{"value":"// EXERCISE 4: Custom Time Intervals\n// \n// Goal: Compare CPU usage with different time intervals\n//       to understand how interval affects data granularity\n// \n// Hints:\n// - Use timeseries command with interval parameter\n// - Syntax: timeseries <metric>, by:{<entity>}, interval:<time>\n// - Try interval:5m for 5-minute buckets\n// - Compare with interval:15m to see fewer data points\n// - Limit results to make comparison easier\n// \n// Write your query below (try with interval:5m first):\n","timeframe":{"from":"now-2h","to":"now"}},"visualization":"lineChart","visualizationSettings":{"chartSettings":{"gapPolicy":"connect","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["cpu"],"leftAxisDimensions":["dt.entity.host"]},"leftYAxis":{"label":"CPU Usage %"}},"table":{"rowDensity":"condensed"}}}}]}