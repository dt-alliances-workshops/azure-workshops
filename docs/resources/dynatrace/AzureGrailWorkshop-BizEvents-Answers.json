{"version":"5","defaultTimeframe":{"from":"now-2h","to":"now"},"sections":[{"id":"be-intro-001","type":"markdown","markdown":"# BizEvents Lab: Answers\n\nThis notebook contains the **answers** to the BizEvents Lab exercises. Use this as a reference after attempting the exercises yourself.\n\n## What are BizEvents?\n\nBizEvents (Business Events) capture meaningful business transactions and user actions in your applications. The easyTrade application sends BizEvents for every trade transaction, allowing us to analyze trading patterns, volumes, and user behavior.\n"},{"id":"be-ex1-intro","type":"markdown","markdown":"## Answer 1: Explore BizEvents\n\nThis query fetches all business events so you can see what fields are available."},{"id":"be-ex1-query","type":"dql","title":"Answer 1: Basic BizEvents Query","showTitle":true,"state":{"input":{"value":"fetch bizevents\n| limit 100","timeframe":{"from":"now-2h","to":"now"}},"visualization":"table","visualizationSettings":{"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}}}}},{"id":"be-ex2-intro","type":"markdown","markdown":"## Answer 2: Count Trades by Type\n\nThis query counts trades grouped by event type (buy vs sell)."},{"id":"be-ex2-query","type":"dql","title":"Answer 2: Summarize Trades by Type","showTitle":true,"state":{"input":{"value":"fetch bizevents\n| filter matchesPhrase(event.type, \"easytrade\")\n| summarize count(), by: {event.type}\n| sort `count()` desc","timeframe":{"from":"now-24h","to":"now"}},"visualization":"pieChart","visualizationSettings":{"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"chartSettings":{"circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"}}}}},{"id":"be-ex3-intro","type":"markdown","markdown":"## Answer 3: Trade Volume Over Time\n\nThis query creates a time series showing trade counts over time, grouped by trade type. The `makeTimeseries` command buckets data into time intervals for charting."},{"id":"be-ex3-query","type":"dql","title":"Answer 3: Trade Time Series","showTitle":true,"state":{"input":{"value":"fetch bizevents\n| filter matchesPhrase(event.type, \"easytrade\")\n| makeTimeseries count(), by:{event.type}, interval:5m","timeframe":{"from":"now-2h","to":"now"}},"visualization":"lineChart","visualizationSettings":{"chartSettings":{"legend":{"position":"bottom"},"leftYAxis":{"label":"Trade Count"}},"table":{"rowDensity":"condensed"}}}},{"id":"be-ex4-intro","type":"markdown","markdown":"## Answer 4: Trade Analysis with Lookup\n\nThis query analyzes average instrument prices from trade events. The `lookup` command can join this with other data sources for enrichment."},{"id":"be-ex4-query","type":"dql","title":"Answer 4: Average Price by Instrument","showTitle":true,"state":{"input":{"value":"fetch bizevents\n| filter event.type == \"com.easytrade.buy\" or event.type == \"com.easytrade.sell\"\n| summarize avgPrice = avg(price), tradeCount = count(), by: {instrumentId}\n| sort tradeCount desc","timeframe":{"from":"now-24h","to":"now"}},"visualization":"barChart","visualizationSettings":{"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"chartSettings":{"categoricalBarChartSettings":{"categoryAxis":"instrumentId","valueAxis":"avgPrice","categoryAxisLabel":"Instrument","valueAxisLabel":"Average Price"}}}}},{"id":"be-summary","type":"markdown","markdown":"## Summary\n\n| Exercise | Key Concept | DQL Commands Used |\n|----------|-------------|-------------------|\n| 1 | Basic query | `fetch bizevents`, `limit` |\n| 2 | Filtering & grouping | `filter`, `summarize`, `by:{}` |\n| 3 | Time series | `makeTimeseries`, `interval` |\n| 4 | Aggregation | `summarize`, `avg()`, `count()` |\n"}]}